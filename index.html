import javafx.animation.*;
import javafx.application.Application;
import javafx.scene.Scene;
import javafx.scene.control.Alert;
import javafx.scene.control.Button;
import javafx.scene.layout.Pane;
import javafx.scene.shape.Circle;
import javafx.scene.shape.Rectangle;
import javafx.stage.Stage;
import javafx.util.Duration;

/* ---------- LEVEL ENUM ---------- */
enum Level {
    EASY, NORMAL, HARD, EXTREME, IMPOSSIBLE
}

/* ---------- LEVEL MANAGER ---------- */
class LevelManager {

    private boolean[] unlocked = new boolean[5];

    public LevelManager() {
        unlocked[0] = true; // Only EASY unlocked at start
    }

    public boolean isUnlocked(Level level) {
        return unlocked[level.ordinal()];
    }

    public void completeLevel(Level level) {
        int index = level.ordinal();
        if (index < unlocked.length - 1) {
            unlocked[index + 1] = true;
        }
    }
}

/* ---------- MAIN GAME ---------- */
public class CricketRunGame extends Application {

    LevelManager levelManager = new LevelManager();
    Level currentLevel = Level.EASY;

    @Override
    public void start(Stage stage) {

        Pane root = new Pane();

        // Stickman shapes
        Rectangle bowler = new Rectangle(30, 60);
        bowler.setLayoutX(50);
        bowler.setLayoutY(350);

        Rectangle batsman = new Rectangle(30, 60);
        batsman.setLayoutX(420);
        batsman.setLayoutY(350);

        // Ball
        Circle ball = new Circle(8);
        ball.setLayoutX(80);
        ball.setLayoutY(350);

        // Play button (hidden first)
        Button playBtn = new Button("PLAY");
        playBtn.setLayoutX(230);
        playBtn.setLayoutY(200);
        playBtn.setVisible(false);

        root.getChildren().addAll(bowler, batsman, ball, playBtn);

        /* ---------- STEP 2 ANIMATION ---------- */

        TranslateTransition bowlerMove = new TranslateTransition(Duration.seconds(1), bowler);
        bowlerMove.setByY(-100);

        TranslateTransition ballToBatsman = new TranslateTransition(Duration.seconds(1), ball);
        ballToBatsman.setByX(320);
        ballToBatsman.setByY(-100);

        TranslateTransition batsmanMove = new TranslateTransition(Duration.seconds(1), batsman);
        batsmanMove.setByY(-100);

        TranslateTransition ballHitScreen = new TranslateTransition(Duration.seconds(1), ball);
        ballHitScreen.setByY(-200);

        PauseTransition showPlay = new PauseTransition(Duration.seconds(0.5));
        showPlay.setOnFinished(e -> playBtn.setVisible(true));

        SequentialTransition animation = new SequentialTransition(
                bowlerMove,
                ballToBatsman,
                batsmanMove,
                ballHitScreen,
                showPlay
        );

        animation.play();

        /* ---------- PLAY BUTTON LOGIC ---------- */

        playBtn.setOnAction(e -> {
            if (levelManager.isUnlocked(currentLevel)) {
                Alert alert = new Alert(Alert.AlertType.INFORMATION);
                alert.setTitle("Level Started");
                alert.setHeaderText(null);
                alert.setContentText("Playing level: " + currentLevel);
                alert.showAndWait();

                // Level completed
                levelManager.completeLevel(currentLevel);

                // Move to next level
                if (currentLevel != Level.IMPOSSIBLE) {
                    currentLevel = Level.values()[currentLevel.ordinal() + 1];
                }
            }
        });

        stage.setScene(new Scene(root, 550, 420));
        stage.setTitle("Cricket Run Game");
        stage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }
}